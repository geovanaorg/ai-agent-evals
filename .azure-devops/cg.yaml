# Release build script
#
# Uses the common build logic, but also gains capabilities related to releasing the product.

# Only trigger manually

trigger: none

pr: none

resources:
  repositories:
  - repository: 1ESPipelineTemplates
    type: git
    name: 1ESPipelineTemplates/1ESPipelineTemplates
    ref: refs/tags/release

extends:
  template: v1/1ES.Official.PipelineTemplate.yml@1ESPipelineTemplates
  parameters:
    settings:
      skipBuildTagsForGitHubPullRequests: true
    # featureFlags:
      # autoBaseline: false
    sdl:
      baseline:
        baselineSet: default
        baselineFile: $(Build.SourcesDirectory)/.gdn/.gdnbaselines
      sourceAnalysisPool:
        os: windows

    stages:
    - stage: stage
      jobs:
      - job: job
        steps:
        - template: .azure-devops/common-steps.yml@self
